<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open When â€” from Emi ğŸ’Œ</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Zen+Kaku+Gothic+New:wght@300;400;700&family=Dancing+Script:wght@600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --bg: #0d0208;
  --rose: #ff4d6d;
  --rose2: #ff85a1;
  --crimson: #c9184a;
  --gold: #ffd166;
  --cream: #fff0f3;
  --soft: #ffb3c1;
  --glow: rgba(255,77,109,0.4);
  --glass: rgba(255,255,255,0.04);
  --border: rgba(255,133,161,0.2);
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--cream);
  font-family: 'Zen Kaku Gothic New', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  cursor: none;
}

/* CURSOR */
.cursor-dot {
  position: fixed;
  width: 8px; height: 8px;
  background: var(--rose);
  border-radius: 50%;
  transform: translate(-50%,-50%);
  pointer-events: none;
  z-index: 9999;
  box-shadow: 0 0 12px var(--rose), 0 0 24px var(--rose);
  transition: width 0.2s, height 0.2s;
}
.cursor-ring {
  position: fixed;
  width: 32px; height: 32px;
  border: 1.5px solid var(--rose2);
  border-radius: 50%;
  transform: translate(-50%,-50%);
  pointer-events: none;
  z-index: 9998;
  opacity: 0.6;
  transition: width 0.25s ease, height 0.25s ease, border-color 0.25s ease, opacity 0.25s ease;
}
.cursor-ring.hover {
  width: 52px; height: 52px;
  opacity: 1;
  border-color: var(--gold);
}

/* CANVAS */
#bgCanvas {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

/* HERO */
.hero {
  position: relative;
  z-index: 2;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 60px 20px;
  overflow: hidden;
}

.hero-bg-text {
  position: absolute;
  font-family: 'Playfair Display', serif;
  font-size: clamp(100px, 22vw, 260px);
  font-weight: 700;
  font-style: italic;
  color: transparent;
  -webkit-text-stroke: 1px rgba(255,77,109,0.06);
  user-select: none;
  pointer-events: none;
  white-space: nowrap;
  animation: driftText 18s ease-in-out infinite alternate;
  letter-spacing: -0.02em;
}
@keyframes driftText {
  from { transform: translateX(-4%) rotate(-1.5deg); opacity: 0.6; }
  to   { transform: translateX(4%) rotate(1.5deg); opacity: 1; }
}

.count-badge {
  position: absolute;
  top: 32px; right: 36px;
  font-family: 'Playfair Display', serif;
  font-size: clamp(60px, 12vw, 110px);
  font-weight: 700;
  font-style: italic;
  color: transparent;
  -webkit-text-stroke: 1px rgba(255,133,161,0.15);
  line-height: 1;
  user-select: none;
  opacity: 0;
  animation: slideIn 1s ease forwards 1.5s;
}
.from-tag {
  position: absolute;
  bottom: 36px; left: 36px;
  font-family: 'Dancing Script', cursive;
  font-size: clamp(1rem, 2.5vw, 1.5rem);
  color: var(--gold);
  opacity: 0;
  animation: slideIn 0.8s ease forwards 1.3s;
}

.hero-tag {
  font-family: 'Space Mono', monospace;
  font-size: 0.68rem;
  letter-spacing: 0.28em;
  color: var(--rose);
  text-transform: uppercase;
  margin-bottom: 28px;
  opacity: 0;
  animation: slideIn 0.8s ease forwards 0.4s;
  border: 1px solid var(--border);
  display: inline-block;
  padding: 7px 18px;
  border-radius: 100px;
}

.hero-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(3.2rem, 11vw, 8rem);
  font-style: italic;
  font-weight: 700;
  line-height: 0.92;
  margin-bottom: 24px;
  opacity: 0;
  animation: slideIn 0.8s ease forwards 0.65s;
}
.hero-title .line1 {
  display: block;
  background: linear-gradient(135deg, #fff0f3, var(--soft));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.hero-title .line2 {
  display: block;
  background: linear-gradient(135deg, var(--rose), var(--crimson));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 0 40px rgba(255,77,109,0.5));
}

.hero-sub {
  font-size: clamp(0.82rem, 1.8vw, 0.98rem);
  color: rgba(255,179,193,0.65);
  font-style: italic;
  margin-bottom: 52px;
  opacity: 0;
  animation: slideIn 0.8s ease forwards 0.9s;
  max-width: 360px;
  line-height: 1.7;
}

.hero-scroll {
  opacity: 0;
  animation: slideIn 0.8s ease forwards 1.15s, floatAnim 2.5s ease-in-out infinite 2s;
  font-size: 1.6rem;
  cursor: pointer;
  display: inline-block;
}
@keyframes floatAnim {
  0%,100% { transform: translateY(0); }
  50%      { transform: translateY(-10px); }
}

/* SECTION */
.section {
  position: relative;
  z-index: 2;
  padding: 20px 0 100px;
}
.section-header {
  text-align: center;
  padding: 0 20px 64px;
}
.section-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.62rem;
  letter-spacing: 0.3em;
  color: var(--rose);
  text-transform: uppercase;
  margin-bottom: 14px;
  display: block;
}
.section-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(1.7rem, 4vw, 2.6rem);
  font-style: italic;
  color: var(--cream);
}

/* GRID */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
  gap: 18px;
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 24px;
}

/* CARD */
.card {
  position: relative;
  border-radius: 18px;
  border: 1px solid var(--border);
  background: var(--glass);
  backdrop-filter: blur(16px);
  overflow: hidden;
  cursor: pointer;
  opacity: 0;
  transform: translateY(28px);
  animation: cardIn 0.55s ease forwards;
  transition: border-color 0.3s, box-shadow 0.3s, transform 0.3s;
}
@keyframes cardIn {
  to { opacity: 1; transform: translateY(0); }
}
.card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at var(--mx,50%) var(--my,50%), rgba(255,77,109,0.1) 0%, transparent 65%);
  opacity: 0;
  transition: opacity 0.3s;
  pointer-events: none;
  z-index: 0;
}
.card:hover::before { opacity: 1; }
.card:hover {
  border-color: rgba(255,133,161,0.5);
  box-shadow: 0 20px 60px rgba(255,77,109,0.18), inset 0 1px 0 rgba(255,255,255,0.05);
  transform: translateY(-5px) scale(1.012);
}

.card-inner {
  padding: 26px 22px 22px;
  position: relative;
  z-index: 1;
}

/* Envelope art */
.card-envelope {
  position: relative;
  width: 100%;
  height: 120px;
  margin-bottom: 20px;
}
.env-wrap {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.env-svg {
  width: 130px; height: 86px;
  filter: drop-shadow(0 6px 20px rgba(255,77,109,0.18));
  transition: filter 0.3s;
}
.card:hover .env-svg {
  filter: drop-shadow(0 10px 30px rgba(255,77,109,0.45));
}
.flap-path {
  transform-origin: 70px 0;
  transform-box: fill-box;
  transition: transform 0.55s cubic-bezier(0.4,0,0.2,1);
}
.card:hover .flap-path {
  transform: rotateX(-170deg);
}
.letter-slip {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%) translateY(0px);
  width: 80px; height: 52px;
  background: linear-gradient(160deg, #fff5f7, #ffdde6);
  border-radius: 3px 3px 0 0;
  transition: transform 0.55s cubic-bezier(0.4,0,0.2,1) 0.08s;
  z-index: -1;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.3rem;
}
.card:hover .letter-slip { transform: translateX(-50%) translateY(-22px); }

/* Card meta */
.card-num {
  position: absolute;
  top: 14px; right: 18px;
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  color: rgba(255,133,161,0.3);
  letter-spacing: 0.1em;
}
.card-open-tag {
  font-family: 'Space Mono', monospace;
  font-size: 0.58rem;
  letter-spacing: 0.25em;
  color: var(--rose);
  text-transform: uppercase;
  opacity: 0.65;
  display: block;
  margin-bottom: 5px;
}
.card-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.02rem;
  font-style: italic;
  color: var(--cream);
  line-height: 1.35;
}
.card-action {
  display: flex;
  align-items: center;
  gap: 7px;
  margin-top: 16px;
  padding-top: 14px;
  border-top: 1px solid var(--border);
  font-size: 0.62rem;
  color: rgba(255,133,161,0.35);
  font-family: 'Space Mono', monospace;
  letter-spacing: 0.12em;
  transition: color 0.3s;
}
.card:hover .card-action { color: var(--rose); }
.action-dot {
  width: 5px; height: 5px;
  background: currentColor;
  border-radius: 50%;
  animation: blink 1.5s ease-in-out infinite;
}
@keyframes blink {
  0%,100% { opacity: 1; }
  50%      { opacity: 0.3; }
}

/* MODAL */
.overlay {
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease;
}
.overlay.active {
  opacity: 1;
  pointer-events: all;
}
.overlay-bg {
  position: absolute;
  inset: 0;
  background: rgba(4,0,2,0.88);
  backdrop-filter: blur(24px);
}
.modal {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 560px;
  max-height: 88vh;
  overflow-y: auto;
  background: #120009;
  border: 1px solid rgba(255,133,161,0.22);
  border-radius: 22px;
  box-shadow: 0 40px 100px rgba(255,77,109,0.22), inset 0 1px 0 rgba(255,133,161,0.08);
  transform: translateY(40px) scale(0.93);
  transition: transform 0.45s cubic-bezier(0.4,0,0.2,1);
}
.overlay.active .modal {
  transform: translateY(0) scale(1);
}
.modal::-webkit-scrollbar { width: 3px; }
.modal::-webkit-scrollbar-thumb { background: var(--crimson); border-radius: 2px; }

.modal-header {
  padding: 38px 42px 28px;
  border-bottom: 1px solid var(--border);
  position: relative;
}
.modal-glow {
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 50% -20%, rgba(255,77,109,0.14) 0%, transparent 65%);
  pointer-events: none;
  border-radius: 22px 22px 0 0;
}
.modal-icon {
  font-size: 2.6rem;
  display: block;
  margin-bottom: 16px;
  animation: iconBounce 0.6s cubic-bezier(0.4,0,0.2,1) forwards;
}
@keyframes iconBounce {
  0%   { transform: scale(0) rotate(-20deg); opacity: 0; }
  60%  { transform: scale(1.15) rotate(5deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}
.modal-tag {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  letter-spacing: 0.3em;
  color: var(--rose);
  text-transform: uppercase;
  display: block;
  margin-bottom: 9px;
  opacity: 0.75;
}
.modal-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(1.6rem, 4vw, 2.2rem);
  font-style: italic;
  color: var(--cream);
  line-height: 1.2;
  padding-right: 40px;
}
.modal-close {
  position: absolute;
  top: 22px; right: 22px;
  width: 36px; height: 36px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.03);
  color: rgba(255,179,193,0.55);
  font-size: 0.88rem;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.modal-close:hover {
  background: rgba(255,77,109,0.14);
  border-color: var(--rose);
  color: var(--cream);
  transform: rotate(90deg);
}
.modal-body {
  padding: 32px 42px 44px;
  font-size: 0.95rem;
  line-height: 1.95;
  color: rgba(255,240,243,0.82);
}
.modal-body p { margin-bottom: 18px; }
.modal-body .shout {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 1.08rem;
  color: var(--rose);
  letter-spacing: 0.03em;
  display: block;
}
.modal-body .signature {
  font-family: 'Dancing Script', cursive;
  font-size: 1.6rem;
  color: var(--gold);
  display: block;
  margin-top: 30px;
}
.modal-deco {
  text-align: center;
  margin: 20px 0;
  letter-spacing: 0.5em;
  color: rgba(255,133,161,0.3);
  font-size: 0.85rem;
}

/* FOOTER */
.footer {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 60px 20px 90px;
}
.footer-line {
  width: 1px; height: 64px;
  background: linear-gradient(to bottom, transparent, rgba(255,133,161,0.2), transparent);
  margin: 0 auto 24px;
}
.footer-text {
  font-family: 'Dancing Script', cursive;
  font-size: 1.05rem;
  color: rgba(255,212,166,0.55);
}

/* ANIMATIONS */
@keyframes slideIn {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* Burst particles HTML */
.burst-el {
  position: fixed;
  pointer-events: none;
  z-index: 1001;
  font-size: 1.1rem;
  will-change: transform, opacity;
  animation: burstAnim 0.85s ease forwards;
}
@keyframes burstAnim {
  0%   { opacity: 1; transform: translate(-50%,-50%) scale(0) rotate(0deg); }
  55%  { opacity: 1; }
  100% { opacity: 0; transform: translate(calc(-50% + var(--bx,0px)), calc(-50% + var(--by,0px))) scale(1.2) rotate(var(--br,0deg)); }
}

@media (max-width:600px) {
  .modal-header, .modal-body { padding-left: 24px; padding-right: 24px; }
  .count-badge, .from-tag { display: none; }
}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>
<div class="cursor-dot" id="cursorDot"></div>
<div class="cursor-ring" id="cursorRing"></div>

<!-- HERO -->
<section class="hero" id="top">
  <div class="hero-bg-text">LOVE</div>
  <div class="count-badge">20</div>
  <div class="from-tag">âœ¦ from Emi, with love âœ¦</div>
  <span class="hero-tag">âœ‰ open when letters</span>
  <h1 class="hero-title">
    <span class="line1">Letters</span>
    <span class="line2">for You</span>
  </h1>
  <p class="hero-sub">20 envelopes â€” open only when the moment is right</p>
  <span class="hero-scroll" onclick="document.getElementById('letters').scrollIntoView({behavior:'smooth'})">â†“</span>
</section>

<!-- LETTERS -->
<section class="section" id="letters">
  <div class="section-header">
    <span class="section-label">âœ¦ a collection âœ¦</span>
    <h2 class="section-title">Pick your moment</h2>
  </div>
  <div class="grid" id="grid"></div>
</section>

<footer class="footer">
  <div class="footer-line"></div>
  <p class="footer-text">made with every piece of my heart ğŸ’•</p>
</footer>

<!-- MODAL -->
<div class="overlay" id="overlay">
  <div class="overlay-bg" id="overlayBg"></div>
  <div class="modal" id="modal">
    <div class="modal-header">
      <div class="modal-glow"></div>
      <span class="modal-icon" id="mIcon"></span>
      <span class="modal-tag">Open When...</span>
      <h2 class="modal-title" id="mTitle"></h2>
      <button class="modal-close" id="mClose">âœ•</button>
    </div>
    <div class="modal-body" id="mBody"></div>
  </div>
</div>

<script>
// â”€â”€â”€ LETTER DATA â”€â”€â”€
const letters = [
  { title:"It's Valentine's Day", icon:"ğŸ’",
    body:`<p>Happy Valentine's Day~~~</p>
<p>ã„ã‚„ãƒ¼æœ¬å½“ã¯ã­ã€å®Œå…¨ã«ç§˜å¯†ã«ã—ã¦ã‚µãƒ—ãƒ©ã‚¤ã‚ºã—ãŸã‹ã£ãŸã‚“ã ã‘ã©ã“ã†ããŒé€”ä¸­ã§ä¸æ©Ÿå«Œã«ãªã£ã¡ã‚ƒã£ãŸã‹ã‚‰ã€ãƒã‚¿ãƒãƒ¬ï¼ˆï¼Ÿï¼‰ã¨ã—ã¦æ‰‹ç´™ã‚ã’ã‚‹ã­ã£ã¦è¨€ã„ã¾ã—ãŸã€‚æœŸå¾…ã«æ·»ãˆãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚</p>
<p>ä»Šå¹´ã¯ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã¯ã‚ã’ã‚‹ã“ã¨ã¯ã§ããªã„ã‘ã©ãœã²ã€ã‚ãŸãŸã‹ãƒ¼ãªæ°—æŒã¡ã«ãªã£ã¦æ¬²ã—ã„ã®ã§æ‰‹ç´™ã‚’æ›¸ãã¾ã™ã€‚</p>
<p>ã“ã†è€ƒãˆã‚‹ã¨ãŠäº’ã„ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆä½œã‚Šã‚ã£ã¦äº¤æ›ã—ã¦ãŸã“ã¨ãŒã™ã”ãæ‡ã‹ã—ãæ„Ÿã˜ã‚‹ã€‚ã‚‚ã†ä»˜ãåˆã£ã¦3å¹´ã ã‚ˆï¼ã‚„ã£ã¹ãˆã‚ˆã€‚æ—©ã„ã‚ˆã€‚ä»Šã¯ã‚¢ãƒ¡ãƒªã‚«ã¨æ—¥æœ¬ã§é›¢ã‚Œé›¢ã‚Œã ã‘ã©æ¥å¹´ã¯ä¸€ç·’ã«éã”ã›ã‚‹ã¨ã„ã„ãªã¨æ€ã„ã¾ã™ã€‚ä¸€ç·’ã«æ‰‹ä½œã‚Šãƒãƒ§ã‚³ä½œã£ãŸã‚Šã™ã®ã‚‚ã‚¢ãƒªã ã¨æ€ã†ï¼ï¼ï¼ï¼
</p>
<p>ã‚ã¨æœ€è¿‘ã‚ã‚“ã¾æ§‹ã£ã¦ã‚ã’ã‚Œãªãã¦ä¸å®‰ã«ã•ã›ã¡ã‚ƒã£ã¦ã”ã‚ã‚“ã­ã€‚åˆ¥ã«ã“ã†ãã«å¯¾ã™ã‚‹æ°—æŒã¡ãŒå†·ã‚ãŸã‚ã‘ã˜ã‚ƒãªã„ã—ã€ã“ã†ãã“ã¨ã©ã†ã§ã‚‚ã„ã„ã¨ã‹æ€ã£ãŸã“ã¨ãªã„ã‹ã‚‰ï¼ã“ã‚Œã‹ã‚‰ã¯æ™‚é–“ãŒã§ãã‚‹ã‹ã‚‰ã‚‚ã£ã¨é€£çµ¡ã—ã¾ã™ã‚ã­ã€‚</p>
<p>ã„ã¤ã‚‚ã‰ã‚ã‚ŠãŒã¨ã€ã“ã‚Œã‹ã‚‰ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚</p>
<p>å¤§æ„›ã—ã¦ã‚‹ã€‚</p>
<span class="signature">Emi ğŸ’•</span>` },

  { title:"You Miss Me", icon:"ğŸŒ™",
    body:`<p class="shout">You think youâ€™re the only one who misses me??</p>
<p class="shout">I miss you too, idiot.</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>æ™®é€šã«DMã§ã‚‚ãƒ©ã‚¤ãƒ³ã§ã‚‚ã„ã„ã‹ã‚‰é€£çµ¡ã—ã¦ã‚‚ã‚ã¦ã€‚æœ€è¿‘ã‚ã¾ã‚Šé›»è©±ã§ãã¦ãªã„ã—é›»è©±ã—ãŸã„ã€‚æ—¥æœ¬æ™‚é–“ã®15æ™‚ã€16æ™‚ã«é›»è©±ã—ã¦ã‚‚ã„ã„ã®ï¼Ÿã—ã¦ã„ã„ãªã‚‰æ¯æ—¥å­¦æ ¡å¸°ã‚Šã«ã‹ã‘ã‚‹ã¨æ€ã†ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ™</span>` },

  { title:"You Need a Hug", icon:"ğŸ¤—",
    body:`<p>ä½•ã‹è¾›ã„ã“ã¨ã§ã‚‚ã‚ã£ãŸã®ï¼Ÿãã‚Œã¨ã‚‚ãŸã ã†ã¡ã«ä¼šã„ãŸããªã£ã¡ã‚ƒã£ãŸãï¼Ÿã‚ã‹ã‚‹ã€‚ã„ã„å¥³ã™ãã¦ä¸­æ¯’æ€§åŠç«¯ãªã„ã‚‚ã‚“ã­ã€‚</p>
<p>æ¬¡ä¼šã†æ™‚ã€ä»Šæ¬²ã—ã„ã¨æ€ã£ã¦ã‚‹ãƒã‚°ã®100å€ãã‚…ãƒ¼ã£ã¦ã™ã‚‹ã­</p>
<div class="modal-deco">â™¡</div>
<p>ã‚‚ã—ã¾ã ãŠäº’ã„é›¢ã‚ŒãŸã¨ã“ã‚ã«æš®ã‚‰ã—ã¦ãŸã‚‰å¿ƒã®ä¸­ã«ãˆã¿ãŒå®¿ã£ã¦ã„ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãšã«ã€‚</p>
<p>ã‚‚ã—ã‚‚ã†ãŠäº’ã„ã™ãä¼šãˆã‚‹è·é›¢ãªã‚‰ã•ã£ã•ã¨ãƒã‚°ã—ã«æ¥ã„ã€‚ã©ã‚“ã¨æ§‹ãˆã¦ã‚‹ã‹ã‚‰</p>
<span class="signature">ãˆã¿ ğŸ¤—</span>` },

  { title:"You're on Your Way to Visit Me", icon:"âœˆï¸",
    body:`<p>ã“ã®æ‰‹ç´™ã‚’èª­ã‚“ã§ã‚‹ã£ã¦ã“ã¨ã¯ã€ã‚‚ã†ã™ãä¼šãˆã‚‹ã£ã¦ã“ã¨ï¼ï¼</p>
<p>å¬‰ã—ã„ã‚ˆãŠãŠãŠãŠãŠãŠãŠãŠã€‚ã©ã‚“ãã‚‰ã„ã‚¤ãƒ¡ãƒã‚§ãƒ³ã—ãŸã®ã‹ãªï¼Ÿã¾ã‚ã©ã‚“ãªã“ã†ãã§ã‚‚æ„›ã—ã¦ã‚‹ã‚“ã§ã™ã‘ã©ã­</p>
<p>æ—©ãæ—©ãæ—©ãæ¥ã¦ã€‚</p>
<p>ã‚ã¨ã¾ãŸsour patché£Ÿã¹ãŸã„ãª...è²·ãˆã‚‹ä½™è£•ã‚ã£ãŸã‚‰ãŠåœŸç”£ã¨ã—ã¦ãŠé¡˜ã„ã—ã¾ã™ã€‚ã¾ã‚ã§ã‚‚ã“ã†ããŒå¥åº·ã§ã„ãŸã‚‰ãã‚Œã§ã„ã„ã‹ãªï¼</p>
<p>ç€ã„ãŸã‚‰çµ¶å¯¾ã™ãé€£çµ¡ã—ã¦ã­ã€‚ç©ºæ¸¯ã¾ã§èµ°ã£ã¦ã„ãã‹ã‚‚ã—ã‚Œãªã„ï¼ˆå˜˜ã˜ã‚ƒãªã„ã‹ã‚‚ï¼‰ã€‚æœ€è¿‘ãƒ•ãƒƒè»½ã ã‹ã‚‰ï¼</p>
<div class="modal-deco">âœˆï¸ â™¡ âœˆï¸</div>
<span class="signature">ãˆã¿ ğŸ’Œ</span>` },

  { title:"You Can't Sleep", icon:"ğŸŒ›",
    body:`<p>å¤œä¸­ã«ç›®ãŒè¦šã‚ã¡ã‚ƒã£ãŸã®ï¼Ÿ</p>
<p>å¯ã‚ã‚„ã£ã¦è¨€ã„ãŸã„ã¨ã“ã‚ã ã‘ã©ã€ä¸€å›ã†ã¡ã«é›»è©±ã—ã¦ã¿ã¦ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ã†ã¡ã‚‚å¯ã¦ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©æ°—ã¥ã„ãŸã‚‰çµ¶å¯¾å‡ºã‚‹ã‚ˆã†ã«ã™ã‚‹ã­ã€‚</p>
<div class="modal-deco">â™¡</div>
<p>ã‚ã€ã§ã‚‚ã¡ã‚ƒã‚“ã¨å¯ã‚‹ã‚“ã ã‚ˆï¼Ÿã‚ãªãŸæ”¾ã£ã¦ãŠãã¨ã™ã£ã”ã„ä¸å¥åº·ãªç”Ÿæ´»ã—ãã†ã€‚ã‚ã¨å¤œæ›´ã‹ã—ã¯ãŠè‚Œã®å¤§æ•µã‚ˆã€‚ã¾ã‚ã‚‚ã—ã†ã¡ãŒãã°ã«ã„ãŸã‚‰å­å®ˆå”„æ­Œã£ã¡ã‚ƒã‚‹</p>
<p>ã„ã„å¤¢è¦‹ã¦ã­</p>
<span class="signature">ãˆã¿ ğŸŒ›</span>` },

  { title:"We Had an Argument", icon:"ğŸŒ§ï¸",
    body:`<p class="shout">å…ˆã«è¬ã£ã¨ãã€‚ã”ã‚ã‚“ã­</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>ã‚‚ã—ã‹ã—ãŸã‚‰æ„Ÿæƒ…çš„ã«ãªã£ã¦ãŸã‹ã‚‚ã—ã‚Œãªã„...</p>
<p>å‚·ã¤ã‘ã‚‹ã‚ˆã†ãªã“ã¨è¨€ã£ã¡ã‚ƒã£ãŸã‚‰æœ¬å½“ã«ã”ã‚ã‚“ã€‚æ„Ÿæƒ…ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<p>ã†ã¡ã«ã¨ã£ã¦ã“ã†ããŒä¸€ç•ªã ã—ã“ã‚Œã‹ã‚‰ã‚‚ãã°ã«ã„ãŸã„ã€‚ã‚‚ã—æ‹—ã­ã¡ã‚ƒã£ãŸã‚‰ã‚¹ãƒã¡ã‚ƒã¾ã¨ã—ã¦å¯æ„›ãŒã£ã¦ãã ã•ã„ã€‚</p>
<span class="signature">ãˆã¿ğŸŒ§ï¸</span>` },

  { title:"You Need to Feel Loved", icon:"ğŸ’–",
    body:`<p class="shout">I LOVE YOU I LOVE YOU I LOVE YOU I LOVE YOU I LOVE YOU I LOVE YOU I LOVE YOU</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>ã“ã†ãã®ã“ã¨æ„›ã—ã¦ã‚‹ã£ã¦æ°—æŒã¡ã€ä»Šã©ã®ãã‚‰ã„å±Šã„ãŸï¼Ÿ</p>
<p>ã†ã¡ã«é€£çµ¡ã—ã¦ã­ã€‚ã¡ã‚ƒã‚“ã¨æ„›ã—ã¦ã‚‹ã£ã¦è¨¼æ˜ã™ã‚‹ã‹ã‚‰ã€‚</p>
<p>I apologize if my attitude was making you worried.</p>
<p>ãªã‚“ã ã‚ã†ã­ã€èª¬æ˜ãŒé›£ã—ã„ã‚“ã ã‘ã©ãªã‚“ã‹ã­ã€å®¶æ—ã¨ã„ã‚‹æ™‚ã®å®‰å¿ƒæ„Ÿã‚’æœ€è¿‘ã“ã†ãã«æŠ±ã„ã¦ã‚‹ã‹ã‚‰é™ã‹ã«è¦‹ãˆã‚‹ã‘ã©è½ã¡ç€ã„ã¦ã‚‹ã‚“ã ã¨æ€ã†ã€‚ã ã‘ã©æ„›ãŒãŸã‚Šã­ã‡ãªãƒ¼ã£ã¦æ€ã£ãŸã‚‰é€£çµ¡ã—ã¦ã­ã€‚</p>
<p>ã‚ã€ã ã‘ã©æ‹—ã­ã¡ã‚ƒã¾ã¯ã¡ã‚‡ã£ã¨è‹¦æ‰‹ã ã‹ã‚‰ã‚„ã‚ã¦ã­ã€‚ãŸã å˜ã«æ„›ãŒã»ã—ã„ã£ã¦è¨€ã£ãŸã‚‰æ€ã„ã£ãã‚Šå«ã¶ãã‚‰ã„æ„›ã™ã‹ã‚‰ã€‚</p>
<span class="signature">ãˆã¿ ğŸ’•</span>` },
<p>ã‚ãªãŸã®ã“ã¨ãŒä¸–ç•Œã§ä¸€ç•ªå¥½ãã§ã€ä¸–ç•Œã§ä¸€ç•ªå¤§äº‹ã§ã€ä¸–ç•Œã§ä¸€ç•ªæ„›ã—ã¦ã‚‹ã€‚</p>
<span class="signature">ãˆã¿ ğŸ’–</span>` },

  { title:"You Did Something Bad", icon:"ğŸ˜¬",
    body:`<p>å…¨åŠ›ã§éš ã™ã‹å…¨åŠ›ã§è¬ç½ªã‹é¸ã¹ã€‚</p>
<p>ã¡ãªéš ã—ã¦ãƒãƒ¬ãŸã‚‰ã®ãƒªã‚¹ã‚¯ã‚‚è€ƒãˆã‚ã‚ˆã€‚</p>
<div class="modal-deco">â™¡</div>
<p>ï¼ˆæ­£ç›´ã«è¨€ã£ã¦ãã‚Œã‚‹æ–¹ãŒå¥½ãã ã‘ã©ã­ï¼‰</p>
<span class="signature">ãˆã¿ ğŸ«¶</span>` },

  { title:"You Had a Bad Day", icon:"ğŸŒ§",
    body:`<p>ä»Šæ—¥ã€ã—ã‚“ã©ã‹ã£ãŸã­ã€‚ãŠç–²ã‚Œã•ã¾ã€‚</p>
<p>å…¨éƒ¨ã†ã¾ãã„ã‹ãªã„æ—¥ã£ã¦ã‚ã‚‹ã‚ˆã­ã€‚ãã†ã„ã†æ—¥ã£ã¦æœ¬å½“ã«ã—ã‚“ã©ã„ã‚ˆã­ã€‚</p>
<p>ã ã‘ã©ãŸã¾ã«ã¯æ¯æŠœãã—ãŸã‚‰ã©ã†ï¼Ÿã€‚</p>
<div class="modal-deco">â™¡</div>
<p>å¥½ããªé£²ã¿ç‰©é£²ã‚“ã§ã€æ¨ªã«ãªã£ã¦ã€‚ä»Šæ—¥ã¯ã‚‚ã†ãã‚Œã ã‘ã§ã„ã„ã€‚</p>
<p>æ˜æ—¥ã¾ãŸè©±èã‹ã›ã¦ã­ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ§ï¸ğŸ’•</span>` },

  { title:"It's Your Birthday", icon:"ğŸ‚",
    body:`<p>ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ï¼ï¼</p>
<p>ã“ã†ããŒç”Ÿã¾ã‚Œã¦ãã¦ãã‚Œã¦ã‚ˆã‹ã£ãŸã€‚æœ¬å½“ã«ã€‚</p>
<p>ã“ã†ãã¨å‡ºä¼šãˆãŸã“ã¨ã€ãšã£ã¨ä¸€ç·’ã«ã„ã‚‰ã‚Œã‚‹ã“ã¨ã€ã†ã¡ã«ã¨ã£ã¦ä¸€ç•ªã®å®ç‰©ã ã‚ˆã€‚</p>
<div class="modal-deco">ğŸ‚ â™¡ ğŸ‚</div>
<p>ä»Šæ—¥ã¯æ€ã„ã£ãã‚Šç”˜ãˆã¦ã„ã„ã‹ã‚‰ã­ã€‚ãŠèª•ç”Ÿæ—¥ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã€ä½•ãŒã„ã„ï¼Ÿ</p>
<p>å¤§å¥½ãã€‚ç”Ÿã‚“ã§ãã‚ŒãŸã”ä¸¡è¦ªã«ã‚‚æ„Ÿè¬ã€‚</p>
<span class="signature">ãˆã¿ ğŸ‰</span>` },

  { title:"It's My Birthday", icon:"ğŸŒ¸",
    body:`<p>ä»Šæ—¥ã¯ã†ã¡ã®èª•ç”Ÿæ—¥ï¼</p>
<p>ãŠç¥ã„ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚ã“ã†ãã«ã€ŒãŠã‚ã§ã¨ã†ã€ã£ã¦è¨€ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã ã‘ã§å¹¸ã›ã€‚</p>
<p>ä¸€ç·’ã«ã„ã‚‰ã‚Œã‚‹æ™‚é–“ãŒå¢—ãˆã¾ã™ã‚ˆã†ã«ã€‚</p>
<p>ã‚ã€ã ã‘ã©èª•ãƒ—ãƒ¬ã¯ã»ã‚“ã¨ãã“ã¾ã§é«˜ã„ã‚„ã¤ã˜ã‚ƒãªãã¦ã„ã„ã‹ã‚‰ï¼ï¼</p>
<div class="modal-deco">ğŸŒ¸ â™¡ ğŸŒ¸</div>
<p>æ„›ã•ã‚Œã¦ã‚‹ã£ã¦æ„Ÿã˜ãªãŒã‚‰èª•ç”Ÿæ—¥è¿ãˆã‚‰ã‚Œã¦ã‚‹ã“ã¨ã€å¬‰ã—ã„ã§ã™ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ¸</span>` },

  { title:"It's Our Anniversary", icon:"ğŸ’",
    body:`<p>è¨˜å¿µæ—¥ãŠã‚ã§ã¨ã†ã€‚</p>
<p>ã“ã®æ—¥ã¾ã§ä¸€ç·’ã«ã„ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚</p>
<p>ã„ã‚ã„ã‚ã‚ã£ãŸã‘ã©ã€ãšã£ã¨ãã°ã«ã„ã¦ãã‚Œã¦ã‚‹ã“ã¨ãŒä½•ã‚ˆã‚Šå¬‰ã—ã„ã€‚</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>æ¥å¹´ã‚‚ã€ã“ã‚Œã‹ã‚‰å…ˆãšã£ã¨ã¾ãŸã“ã®æ—¥ã‚’ä¸€ç·’ã«è¿ãˆãŸã„ãªã€‚</p>
<p>ã“ã‚Œã‹ã‚‰ã‚‚ã‚ˆã‚ã—ãã­ã€‚å¤§å¥½ãã ã‚ˆã€‚</p>
<span class="signature">ãˆã¿ ğŸ’</span>` },

  { title:"After Our Date", icon:"ğŸŒƒ",
    body:`<p>ä»Šæ—¥ã€æ¥½ã—ã‹ã£ãŸã­ã€‚</p>
<p>ã‚ãªãŸã¨éã”ã™æ™‚é–“ã£ã¦ã€ãªã‚“ã§æ¯å›ã“ã‚“ãªã«æ—©ãçµ‚ã‚ã£ã¡ã‚ƒã†ã‚“ã ã‚ã†ã€‚</p>
<p>å¸°ã‚Šé“ã€ãšã£ã¨ã•ã£ãã®ã“ã¨æ€ã„å‡ºã—ã¦ãŸã§ã—ã‚‡ã€‚ã†ã¡ã‚‚ã ã‚ˆã€‚</p>
<div class="modal-deco">ğŸŒƒ â™¡ ğŸŒƒ</div>
<p>æ¬¡ã¯ã„ã¤ä¼šãˆã‚‹ï¼Ÿã‚‚ã†ä¼šã„ãŸã„ã€‚</p>
<span class="signature">ãˆã¿ ğŸ’«</span>` },

  { title:"It's Your Graduation", icon:"ğŸ“",
    body:`<p>å’æ¥­ãŠã‚ã§ã¨ã†ï¼</p>
<p>æœ¬å½“ã«ã‚ˆãé ‘å¼µã£ãŸã­ã€‚ãšã£ã¨å¿œæ´ã—ã¦ãŸã‚ˆã€‚</p>
<p>ã“ã‚Œã‹ã‚‰ã®æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¸ã‚‚ã€ãã£ã¨ã†ã¾ãã„ãã€‚ã“ã†ãã®ã“ã¨ã‚’èª°ã‚ˆã‚Šã‚‚ä¿¡ã˜ã¦ã‚‹ã€‚</p>
<div class="modal-deco">ğŸ“ â™¡ ğŸ“</div>
<p>ã©ã‚“ãªæœªæ¥ã«ãªã£ã¦ã‚‚ã€ã†ã¡ã¯ã“ã“ã«ã„ã‚‹ã‚ˆã€‚</p>
<p>ãŠã‚ã§ã¨ã†ã€èª‡ã‚Šã«æ€ã†ã€‚</p>
<span class="signature">ãˆã¿ ğŸ“</span>` },

  { title:"You Are Homesick", icon:"ğŸ ",
    body:`<p>ãƒ›ãƒ¼ãƒ ã‚·ãƒƒã‚¯ã«ãªã£ã¡ã‚ƒã£ãŸï¼Ÿ</p>
<p>ãã†ã„ã†æ°—æŒã¡å¤§äº‹ã«ã—ã¦ã„ã„ã¨æ€ã†ã€‚å¤§åˆ‡ãªå ´æ‰€ã‚’æŒã£ã¦ã‚‹ã£ã¦ã“ã¨ã ã‹ã‚‰ã€‚</p>
<p>é ãã«ã„ã¦ã‚‚ã€ã“ã†ãã®ã“ã¨ã‚’æ€ã£ã¦ã‚‹äººãŒã„ã‚‹ã€‚ã¡ã‚ƒã‚“ã¨ã“ã“ã«ã„ã‚‹ã‚ˆã€‚</p>
<div class="modal-deco">ğŸ  â™¡ ğŸ </div>
<p>æ„šç—´ãã‚‰ã„ã¯ã¡ã‚ƒã‚“ã¨èãã‚ã‚ˆ</p>
<span class="signature">ãˆã¿ ğŸ’•</span>` },

  { title:"You Are Sick", icon:"ğŸµ",
    body:`<p>å¤§ä¸ˆå¤«ï¼Ÿã¡ã‚ƒã‚“ã¨ä¼‘ã‚“ã§ã‚‹ï¼Ÿ</p>
<p>ãã°ã«ã„ã¦ã‚ã’ã‚Œãªãã¦ã”ã‚ã‚“ã­ã€‚</p>
<p>æ°´åˆ†ã¡ã‚ƒã‚“ã¨å–ã£ã¦ã€æš–ã‹ãã—ã¦ã€ã‚†ã£ãã‚Šã—ã¦ã­ã€‚</p>
<div class="modal-deco">ğŸµ â™¡ ğŸµ</div>
<p>æ—©ãè‰¯ããªã£ã¦ã€‚ã‚ãªãŸãŒå…ƒæ°—ã˜ã‚ƒãªã„ã¨ã†ã¡ã‚‚å¿ƒé…ã§è½ã¡ç€ã‹ãªã„ã‹ã‚‰ã€‚</p>
<p>å¿«æ°—ç¥ã„ã€ä¸€ç·’ã«ã—ã‚ˆã†ã­ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ¿</span>` },

  { title:"You Are Tired of Me", icon:"ğŸ˜´",
    body:`<p class="shout">You are not tired of me.</p>
<p class="shout">You are just tired.</p>
<p class="shout">Go to sleep.</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>ãŠã‚„ã™ã¿ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ™</span>` },

  { title:"You Are Mad at Me", icon:"ğŸ«§",
    body:`<p class="shout">You are not mad.</p>
<p class="shout">You are just overthinking.</p>
<p class="shout">Go to sleep.</p>
<div class="modal-deco">â™¡ â™¡ â™¡</div>
<p>æ˜æ—¥ã¾ãŸè©±ãã†ã€‚å¤œã®è€ƒãˆã”ã¨ã¯å¤§æŠµOverthinkã—ã¦ã‚‹ã€‚</p>
<p>ãŠã‚„ã™ã¿ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ™</span>` },

  { title:"It's Christmas", icon:"ğŸ„",
    body:`<p>Merry Christmasï¼</p>
<p>ã‚µãƒ³ã‚¿ã•ã‚“ã«ä½•ãŠé¡˜ã„ã—ãŸï¼Ÿ</p>
<p>ã†ã¡ã¯ã“ã†ãã¨ãšã£ã¨ä¸€ç·’ã«ã„ã‚‰ã‚Œã¾ã™ã‚ˆã†ã«ã£ã¦ãŠé¡˜ã„ã—ãŸã‚ˆã€‚</p>
<div class="modal-deco">ğŸ„ â™¡ ğŸ„</div>
<p>å¤šåˆ†ä»Šå¹´ã¯ã‚ãªãŸå¿™ã—ã™ãã¦ä¸€ç·’ã«éã”ã›ãªã„ã‹ã‚‚ã ã‘ã©ã€åˆ¥ã«æ°—ã«ã—ãªã„ã§ã­ï¼Ÿ</p>
<p>å¤§å¥½ãã€‚ãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ã€‚</p>
<span class="signature">ãˆã¿ â­</span>` },

  { title:"It's New Year", icon:"ğŸ",
    body:`<p>æ–°å¹´æ˜ã‘ã¾ã—ã¦ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
<p>ä»Šåº¦ã“ãä¸€ç·’ã«åˆè©£ã«è¡Œã“ã€‚å‰å›ã¯ã†ã¡ã ã‘å…¥ã£ã¦ãŠã¿ãã˜ã‚‚1äººã§å¼•ã„ã¦å¯‚ã—ã‹ã£ãŸã‹ã‚‰ã­ã€‚</p>
<p>ã¡ã‚‡ã†ã©ã“ã†ãã®å—é¨“æœŸã ã¨æ€ã†ã®ã§å¿™ã—ããªããªã£ãŸã‚‰ä¸€ç·’ã«ã„ã“ã†ã€‚</p>
<div class="modal-deco">ğŸ â™¡ ğŸ</div>
<p>ã“ã‚“ãªã«é•·ããã°ã«ã„ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚ä»Šå¹´ã‚‚ã‚ˆã‚ã—ãã­ï¼</p>
<p>ä¸–ç•Œã§1ç•ªæ„›ã—ã¦ã‚‹ã€‚</p>
<span class="signature">ãˆã¿ ğŸŒ…</span>` }
];

// â”€â”€â”€ CANVAS PARTICLE SYSTEM â”€â”€â”€
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let W, H;
let particles = [];
const mouse = { x: -999, y: -999 };
const heartChars = ['â™¡','â™¥','â¤','ğŸ’•','ğŸ’—','ğŸ’“','ğŸ’','ğŸ’–'];
const pColors = [
  [255,77,109], [255,133,161], [201,24,74], [255,209,230], [255,166,194]
];

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

class Particle {
  constructor(bx, by, burst) {
    this.burst = !!burst;
    this.reset(bx, by);
  }
  reset(bx, by) {
    const c = pColors[Math.floor(Math.random() * pColors.length)];
    this.x  = bx !== undefined ? bx : Math.random() * W;
    this.y  = by !== undefined ? by : H + 20;
    this.ch = heartChars[Math.floor(Math.random() * heartChars.length)];
    this.sz = this.burst ? 13 + Math.random() * 16 : 9 + Math.random() * 14;
    this.r  = `rgba(${c[0]},${c[1]},${c[2]},`;
    this.a  = this.burst ? 0.9 : 0.2 + Math.random() * 0.45;
    this.vx = this.burst ? (Math.random() - 0.5) * 7 : (Math.random() - 0.5) * 0.45;
    this.vy = this.burst ? -(2.5 + Math.random() * 5) : -(0.35 + Math.random() * 0.55);
    this.rot = Math.random() * 360;
    this.rs  = (Math.random() - 0.5) * 2.5;
    this.life = 1;
    this.decay = this.burst ? 0.018 + Math.random() * 0.014 : 0.0007 + Math.random() * 0.0018;
  }
  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.rot += this.rs;
    this.life -= this.decay;
    if (!this.burst) {
      const dx = this.x - mouse.x, dy = this.y - mouse.y;
      const d = Math.sqrt(dx * dx + dy * dy);
      if (d < 90) { this.vx += (dx / d) * 0.12; this.vy += (dy / d) * 0.08; }
    }
    this.vx *= 0.992; this.vy *= 0.992;
    if (this.life <= 0 || this.y < -60) {
      if (this.burst) return false;
      this.reset();
      return true;
    }
    if (!this.burst && (this.x < -30 || this.x > W + 30)) { this.reset(); }
    return true;
  }
  draw() {
    const alpha = this.a * Math.max(0, this.life);
    ctx.save();
    ctx.globalAlpha = alpha;
    ctx.font = `${this.sz}px serif`;
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rot * Math.PI / 180);
    ctx.fillText(this.ch, -this.sz / 2, this.sz / 2);
    ctx.restore();
  }
}

for (let i = 0; i < 55; i++) {
  const p = new Particle();
  p.y = Math.random() * H; // scatter initial positions
  particles.push(p);
}

function burst(x, y, count = 20) {
  for (let i = 0; i < count; i++) particles.push(new Particle(x, y, true));
}

(function loop() {
  ctx.clearRect(0, 0, W, H);
  particles = particles.filter(p => p.update());
  particles.forEach(p => p.draw());
  requestAnimationFrame(loop);
})();

// â”€â”€â”€ CUSTOM CURSOR â”€â”€â”€
const dot  = document.getElementById('cursorDot');
const ring = document.getElementById('cursorRing');
let rx = 0, ry = 0;

document.addEventListener('mousemove', e => {
  mouse.x = e.clientX; mouse.y = e.clientY;
  dot.style.left = e.clientX + 'px';
  dot.style.top  = e.clientY + 'px';
});
(function animRing() {
  rx += (mouse.x - rx) * 0.13;
  ry += (mouse.y - ry) * 0.13;
  ring.style.left = rx + 'px';
  ring.style.top  = ry + 'px';
  requestAnimationFrame(animRing);
})();
document.querySelectorAll('.card, button').forEach(el => {
  el.addEventListener('mouseenter', () => ring.classList.add('hover'));
  el.addEventListener('mouseleave', () => ring.classList.remove('hover'));
});

// â”€â”€â”€ BUILD CARDS â”€â”€â”€
const grid = document.getElementById('grid');
letters.forEach((l, i) => {
  const card = document.createElement('div');
  card.className = 'card';
  card.style.animationDelay = `${0.04 + i * 0.055}s`;

  card.innerHTML = `
    <div class="card-inner">
      <div class="card-num">${String(i + 1).padStart(2, '0')}</div>
      <div class="card-envelope">
        <div class="letter-slip"><span>${l.icon}</span></div>
        <div class="env-wrap">
          <svg class="env-svg" viewBox="0 0 140 90" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="eg${i}" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#280615"/>
                <stop offset="100%" stop-color="#160208"/>
              </linearGradient>
              <linearGradient id="fg${i}" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#3a0a1e"/>
                <stop offset="100%" stop-color="#200410"/>
              </linearGradient>
            </defs>
            <rect width="140" height="90" rx="5" fill="url(#eg${i})"/>
            <path d="M0 24 L70 56 L140 24 L140 90 L0 90 Z" fill="rgba(180,30,70,0.1)"/>
            <path d="M0 90 L70 56 L140 90 Z" fill="rgba(255,133,161,0.06)"/>
            <line x1="0" y1="24" x2="70" y2="56" stroke="rgba(255,133,161,0.12)" stroke-width="0.5"/>
            <line x1="140" y1="24" x2="70" y2="56" stroke="rgba(255,133,161,0.12)" stroke-width="0.5"/>
            <path class="flap-path" d="M2 2 L138 2 L70 54 Z" fill="url(#fg${i})" stroke="rgba(255,133,161,0.18)" stroke-width="0.5"/>
            <rect width="140" height="90" rx="5" fill="none" stroke="rgba(255,133,161,0.14)" stroke-width="1"/>
          </svg>
        </div>
      </div>
      <div>
        <span class="card-open-tag">open when</span>
        <div class="card-title">${l.title}</div>
      </div>
      <div class="card-action"><div class="action-dot"></div>tap to open</div>
    </div>`;

  card.addEventListener('mousemove', e => {
    const r = card.getBoundingClientRect();
    card.style.setProperty('--mx', ((e.clientX - r.left) / r.width * 100) + '%');
    card.style.setProperty('--my', ((e.clientY - r.top)  / r.height * 100) + '%');
  });

  card.addEventListener('click', e => {
    burst(e.clientX, e.clientY, 22);
    openModal(l);
  });

  grid.appendChild(card);
});

// Scroll-triggered card reveal
const observer = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.style.opacity = '1';
      e.target.style.transform = 'translateY(0)';
    }
  });
}, { threshold: 0.08 });
document.querySelectorAll('.card').forEach(c => observer.observe(c));

// â”€â”€â”€ MODAL â”€â”€â”€
const overlay  = document.getElementById('overlay');
const overlayBg = document.getElementById('overlayBg');
const mIcon    = document.getElementById('mIcon');
const mTitle   = document.getElementById('mTitle');
const mBody    = document.getElementById('mBody');
const mClose   = document.getElementById('mClose');

function openModal(l) {
  mIcon.textContent  = l.icon;
  mTitle.textContent = l.title;
  mBody.innerHTML    = l.body;
  // Re-trigger icon bounce
  mIcon.style.animation = 'none';
  mIcon.offsetHeight;
  mIcon.style.animation = '';
  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';
}
function closeModal() {
  overlay.classList.remove('active');
  document.body.style.overflow = '';
}

mClose.addEventListener('click', e => { burst(e.clientX, e.clientY, 8); closeModal(); });
overlayBg.addEventListener('click', closeModal);
document.addEventListener('keydown', e => e.key === 'Escape' && closeModal());

// Cursor hide on leave
document.addEventListener('mouseleave', () => { dot.style.opacity = '0'; ring.style.opacity = '0'; });
document.addEventListener('mouseenter', () => { dot.style.opacity = '1'; ring.style.opacity = '1'; });
</script>
</body>
</html>
